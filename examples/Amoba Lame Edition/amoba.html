<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Am≈ëba Lame Edition</title>

<link rel="stylesheet" type="text/css" href="style.css" />

</head>
<body>

<div id="current"></div>

<div class="table">
	<div class="row">
		<div id="1_1" onClick="step(1,1)"></div>
		<div id="1_2" onClick="step(1,2)"></div>
		<div id="1_3" onClick="step(1,3)"></div>
	</div>
	<div class="row">
		<div id="2_1" onClick="step(2,1)"></div>
		<div id="2_2" onClick="step(2,2)"></div>
		<div id="2_3" onClick="step(2,3)"></div>
	</div>
	<div class="row">
		<div id="3_1" onClick="step(3,1)"></div>
		<div id="3_2" onClick="step(3,2)"></div>
		<div id="3_3" onClick="step(3,3)"></div>
	</div>
</div>

<button onClick="clearTable()">Clear</button>

<script>
	function e(i,j) {
		return document.getElementById(i+'_'+j)
	}
	function change(start) {
		currentPlayer = start ? start : currentPlayer == player[0] ? player[1] : player[0]
		currentElem.innerHTML = currentPlayer
	}
	function clearTable() {
		for (var i = 1; i<=3; i++)
			for (var j = 1; j<=3; j++)
				e(i,j).innerHTML = ''
		change(player[0])
	}
	function grat() {
		alert('Congrats Player '+(currentPlayer == player[0] ? player[1] : player[0])+'!')
		clearTable()
	}
	function check(x, y) {
		var val = e(x,y).innerHTML		
			, i = 1, j = y
		while ((i <= 3) && (e(i,j).innerHTML == val))
			i++
		if (i == 4)	grat()

		i = x, j = 1
		while ((j <= 3) && (e(i,j).innerHTML == val))
			j++
		if (j == 4)	grat()

		i = 1
		j = 1
		while ((i <= 3) && (e(i,j).innerHTML == val)) {
			i++
			j++
		}
		if (i == 4) grat()

		i = 1
		j = 3
		while ((i <= 3) && (e(i,j).innerHTML == val)) {
			i++
			j--
		}
		if (i == 4) grat()
	}
	function step(i, j) {
		var elem = e(i,j)
		if (elem.innerHTML != '') return
		
		elem.innerHTML = currentPlayer

		change()
		check(i, j)
	}

	var player = ['O', 'X']
		, currentPlayer = player[0]
		, currentElem = document.getElementById('current')

	currentElem.innerHTML = currentPlayer
</script>
</body>
</html>